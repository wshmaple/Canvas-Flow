# 🧬 多智能体图表架构专家 (Multi-Agent Diagram Architect)

**Multi-Agent Diagram Architect** 是一款基于 Google Gemini 3 Pro 引擎驱动的次世代生产力工具。它将「无限画布」与「生成式 AI」深度结合，通过多智能体协同工作流，将晦涩复杂的长篇文本、需求文档或业务流程自动解构为直观、可交互且具美感的图表生态系统。

---

## 🚀 核心特性

### 1. 深度内容解构 (Deep Deconstruction)
不再是一个单一的图表生成器。系统会分析输入全文，识别核心实体与逻辑链路，自动决策最适合的图表类型（流程图、时序图、甘特图或思维导图），并将其拆解为多个互联的逻辑模块。

### 2. 无限画布与智能交互 (Infinite Canvas & Interaction)
- **以鼠标为中心的缩放**：缩放时自动聚焦鼠标指针位置，确保在大规模架构图中精准定位。
- **双交互模式**：
  - **指针模式 (V)**：用于拖拽卡片、输入微调指令、触发节点交互。
  - **抓手模式 (H / Space)**：极致顺滑的画布平移体验。
- **智能视口管理**：内置「全员自适应」功能，一键将散落在画布各处的模块完美收纳至当前视口。

### 3. 递归下钻分析 (Recursive Drill-down)
支持图表内部节点的「二次解析」。点击任何节点，AI 会针对该特定实体进行深度分析，生成描述其内部逻辑的子图表，并自动建立父子关联连线，实现从宏观概览到微观细节的无限下钻。

### 4. 工程级持久化 (Project Persistence)
- **JSON 存档/读档**：支持将整个画布的状态（包括 Mermaid 代码、卡片坐标、连线关系、缩放比例）导出为本地 `.json` 工程文件。
- **闭环协作**：导出的工程文件可发送给他人，在任意设备上还原完整工作现场并继续微调。

### 5. AI 局部实时微调
每个图表卡片都是一个独立的「对话单元」。通过卡片底部的 AI 指令框，你可以通过自然语言要求 AI 修改该特定模块（例如：“增加一个异常处理分支”、“将所有数据库节点设为绿色”）。

---

## 🤖 多智能体协同架构 (Agent Workflow)

系统内部运行着一套严密的智能体协议：

| 智能体角色 | 核心职责描述 |
| :--- | :--- |
| **协同调度 (Scheduler)** | 全局逻辑统筹，负责任务分发与拓扑关系确立。 |
| **内容解析 (Parser)** | 语义提取专家，从长文中抽离实体、动作与状态关系。 |
| **图表决策 (Decision)** | 视觉翻译官，根据数据特征决策最佳展现形式（如时序 vs 流程）。 |
| **图表生成 (Generator)** | Mermaid 代码专家，负责生成高语义、无语法错误的图表描述。 |
| **布局管理 (Layout)** | 画布空间管理，基于层级拓扑算法自动避障与整理。 |
| **交互反馈 (Feedback)** | 负责将系统状态以优雅的视觉动效反馈给用户。 |

---

## ⌨️ 快捷操作指南

### 鼠标操作
- **滚轮 (Wheel)**：以指针为中心的缩放 (Zoom-to-Mouse)。
- **Shift + 左键拖拽**：在指针模式下平移画布。
- **左键点击节点**：触发深度下钻分析。

### 键盘快捷键
- **[V]**：切换至 **指针模式** (选择与拖拽)。
- **[H]**：切换至 **抓手模式** (视口平移)。
- **[Space]**：长按临时激活抓手模式，松开恢复。
- **[Enter]**：在卡片输入框内快速提交 AI 微调指令。

---

## 🛠 技术栈概览

- **核心引擎**: Google Gemini 3 Pro (通过 `@google/genai` 实时流式调用)。
- **前端架构**: React 19 (Hooks & Memo 优化) + TypeScript。
- **样式系统**: Tailwind CSS (3.4+) 实现赛博风格 UI。
- **渲染引擎**: Mermaid.js (高性能异步渲染调度器)。
- **自动布局**: 自研 Hierarchical Layout 算法。
- **图像处理**: html2canvas 实现 2K/4K 高清截图导出。

---

## 📦 存档说明
导出的 `.json` 文件包含了当前画布的完整状态。
- `version`: 1.0
- `elements`: 包含所有卡片的 Mermaid 源码、位置、主题 ID。
- `connections`: 包含模块间的逻辑依赖关系。
- `viewConfig`: 包含你上次离开时的缩放层级与偏移坐标。

---
*Developed by Senior AI Engineering Team*