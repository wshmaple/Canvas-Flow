# 🗺️ 项目优化与未来路线图 (Optimization & Roadmap)

本项目目前已具备核心的「多智能体协同」与「无限画布」能力，但为了迈向生产级工具，以下是详细的优化计划与功能演进方向。

---

## 🛠️ 近期优化 (Performance & UX)

### 1. 渲染性能增强
- **Canvas 连线引擎**：当图表卡片数量较多时，SVG 连线可能会产生性能瓶颈。计划切换到 Canvas API 绘制拓扑连线，并支持多种路由算法（如避免穿过卡片中心的避障路由）。
- **异步渲染队列优化**：进一步精细化 `renderManager`，支持根据视口优先级动态调整 Mermaid 的渲染顺序。
- **Web Workers 卸载**：将复杂的 Mermaid 语法解析与拓扑计算移动到 Web Worker 中，确保主线程 UI 绝对流畅。

### 2. 交互体验打磨
- **撤销/重做 (Undo/Redo)**：实现基于状态快照或操作日志的历史记录管理，支持 `Ctrl+Z`。
- **多选与群组操作**：支持框选多个卡片进行批量移动、对齐或主题更改。
- **磁吸对齐 (Snapping)**：在手动拖拽卡片时提供辅助线与吸附感，提升构图整洁度。

---

## 🧠 AI 能力进阶 (Advanced AI)

### 1. 多模态输入解析
- **视觉识别 (Image-to-Diagram)**：允许用户上传白板手绘草图或现有架构图截屏，利用 Gemini 的视觉能力将其直接还原为可编辑的 Mermaid 画布。
- **语音控制 (Voice-to-Command)**：集成原生语音 API，让用户可以通过语音描述“在下方增加一个缓存层”来操作画布。

### 2. 增强型智能体协议
- **搜索增强生成 (RAG)**：当用户描述特定技术栈（如 "AWS Serverless Architecture"）时，智能体自动调用 Google Search 检索最新的官方最佳实践并将其整合到设计中。
- **代码双向映射**：不仅支持文本生成图表，还支持从图表反向生成基础架构代码（如 Terraform、PlantUML 或 SQL DDL）。

---

## 🌐 协作与生态 (Collaboration & Ecosystem)

### 1. 实时协同编辑
- **CRDT 数据同步**：集成 Yjs 等库实现类似 Figma 的多人在同一无限画布上实时协同设计。
- **光标追踪**：显示协作者的实时光标位置与编辑状态。

### 2. 主题与模板仓库
- **自定义主题编辑器**：允许用户自定义图表的颜色梯度、字体样式与背景风格。
- **社区模板库**：内置典型的系统设计模式（如微服务、领域驱动设计 DDD、事件驱动架构）作为起始模板。

---

## 📊 质量与工程化
- **E2E 自动化测试**：针对复杂的 Canvas 交互与 AI 返回结果一致性建立自动化测试链路。
- **离线模式增强**：利用 IndexedDB 缓存 Mermaid 渲染结果与工程存档，支持在断网环境下进行基础的浏览与位置调整。

---
*Blueprint version 1.0.0 | Last Updated: 2025-05-20*